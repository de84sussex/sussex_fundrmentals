---
title: "FundRmentals 03"
author: "Dr Danielle Evans | University of Sussex"
output:
  xaringan::moon_reader:
    css: ["xaringan-themer.css", "ppt_style.css"]
    lib_dir: libs
    nature:
      highlightStyle: monokai
      highlightLines: true
      highlightSpans: true
      ratio: '16:9'
---

```{r, echo=FALSE, eval = F}

xaringanExtra::use_logo("../img/logo.png", width = "30px", height = "30px", link_url = "https://fundrmentals.netlify.app/")

```

```{r setup, include=FALSE}
library(xaringanthemer)
library(xaringanExtra)
library(tidyverse)

options(htmltools.dir.version = FALSE)
xaringanExtra::use_clipboard()

```

```{r xaringan-themer, include=FALSE, warning=FALSE}

style_mono_light(
  base_color = "#23395b"
)

```

# Overview

- Q&A

- Session setup

- Packages, functions, & objects

- Importing data

- Inspecting data

- Next steps

---

class: middle, center

# Any questions from the last tutorial?

---

# Setup

1. Open RStudio

1. Create an R Project for the fundRmentals course or open the project we made last week

  + To create one, go to **File**, **New Project**, **New Directory**, **New Project**, give your project a name, then click **Create**
  
  + Then create **data** & **r_docs** folders (in the **Files pane** click **New Folder**)

  + To open your project from last week, check if you're already in it by looking at the project name in the top right corner of RStudio, if you are not, click on the dropdown arrow and select it from the list

1. Create a new RMarkdown document

  + Go to **File**, **New File**, **RMarkdown**, name it **week_03**, then click **Create**

1. Delete everything in the RMarkdown document that we don't need: from line 11 down, then save your document to the **r_docs** folder



???

To start with, we're going to open up RStudio, then we want to open our R Project that we created last week, or if you werent here, we want to create one now, so to create one, we can go to *File*, *New Project*, *New Directory*, *New Project*, give your project a name, then click *Create*

then in the files pane, we want to create a data folder and an r_docs folder and we can do this by clicking new folder and giving the folder a name

For those of you that created it last week, glance at the top right corner, just underneath the cross to close the window, this shows you what project you're currently in, for all of you, you'll probably already be in your fundrmentals project, so it should say whatever you called it last week there, if it doesnt, click the arrow, and select the project from the list that appears

after we have our project setup, we **all** want to open a new rmarkdown document

to do this, Go to *File*, *New File*, *RMarkdown*, name it *week_03*, then click *Create*

Whenever we open an rmarkdown for the first time, we get a lot of info that we dont need, it just tells us about rmarkdown, so we really only need to read it once, so now delete everything in the RMarkdown document that we don't need: from line 11 down, you can just select it all from line 11 down and press delete

and then save it to the r_docs folder, you can do this either by knitting it, using that lil button at the top with the needle and thread, or by going to the file menu and selecting save there

**DEMO WHAT WE SHOULD HAVE**

---

# Packages

- Packages are essentially just add-ons for RStudio

- Last week we learned that we can use **install.packages()** to install most packages we want to use, where we just insert the name of the package in the brackets 

- If you weren't here last week, you need to install **"tidyverse"** on your device

- To do that, we can run the below line in the **Console**

```{r, eval = F}
install.packages("tidyverse")
```

???

to briefly recap, packages are essentially just add-ons, they build on the functionality of rstudio

to access these packages in rstudio, we first have to download them to our pc, we only need to do this once, or if we ever want to update our copy of the package, where the creator has made any changes made to it

last week, we learned that we can use install.packages to install most packages, and to use it we need to type this command into the console, type out our package name to be within speechmarks, and then press enter to run it

tidyverse is an example of one of these packages, and one that we'll be using very often, so if you weren't here last week, and missed my email, you should install it now, so you can copy this command here, paste it into the console, and press enter

most if not all of you wont need to do this

---

# Loading packages

- To be able to use the contents of package within RStudio, we need to load it

- We can do this by using the **library()** command

- We should load a package once at the top of our RMarkdown document in a code chunk like this: 

```{r, eval = FALSE}
library("tidyverse")
```

- If we don't load a package before we try to use it, we'll get an error appear, so it's best to do it right at the beginning

<br>

### Task

1. Load tidyverse in a new code chunk (**Ctrl + Alt + I** or **Cmd + Alt + I** to insert a new chunk) - don't forget to run it!



???

To be able to use the contents of package within RStudio, we need to load it

We can do this by using the library() command

We should load a package once at the top of our RMarkdown document in a code chunk like this:

so we use library, then within the brackets we give our package name

If we don't load a package before we try to use it, we'll get an error appear, so it's best to do it right at the beginning of our document

so lets have load tidyverse for the session today

so in the rmarkdown file we just created, create a new code chunk, so we can insert these using a keyboard shortcut of ctrl alt i or commmand alt i, and then type in our library command, and then run the chunk with the lil green button

**DEMO LIBRARY(TIDYVERSE)**



---

# Functions & assignment <- 

- We've used two functions already today: **install.packages()** & **library()**

- A function is a way of performing a task in R & they follow this type of structure: 

```{r, eval = FALSE}
package_name::function_name(argument_1 = object_name, argument_2 = 1, argument_3 = TRUE)
```

- Where inside the brackets, we specify different arguments/options - these could be the names of any data/objects, numbers, logical operators etc, & they give us some type of output

- To save the output of a command, we can use the assignment operator **<-**

- We use **<-** as a way of giving a name to some sort of **object** - whether that's the output of code, a dataset, a string of text, a table, a plot etc, like this: 

.tiny[

```{r, eval = FALSE}
object_name <- package_name::function_name(argument_1 = object_name, argument_2 = 1, argument_3 = TRUE)
```

]


???

the library command is an eexample of a function, and so is install.packages,  and a function is a way of getting R to perform some sort of task for us, both of these are part of **Base R** so we didn't need to install any packages to use them,

they follow this type of structure where we we would specify the package where this function comes from, the function name, most functions have some arguments for us to specify as well and we do that within brackets, that might look something like this: we might be specifying the name of an object, or a numerical value, or a logical operator and so on, this will make more sense as we use more functions, but generally when we use a function, its to perform some type of operation, or command, and R will then give us some type of output from that

the package name and double colon isnt stricly necessary, sometimes different packages will have functions of the same name, and we can use this method to specify which we want to use, it's also good style to use, and can help with learning what packages and functions you're using

R will produce some type of output, but it wont save it unless we ask it to, and to do that we can use the assignmeent operator which is this little <- 
by using this assignment operator this arrow, we can create objects in R which we can refer to, and we can use those objects in the same way that we would use the information that's contained within them, whether this is the result of some code, a dataset, a string of text, a plot, table etc., again this will make more sense as we start to use them

to illsutrate that a bit better, we can take our made up command that we have above, and we can give the output a name by 

wahetver the output of this code, will then be accessible through the object name that we've given it, 

like filtering a dataset



--

```{r, eval = FALSE}
my_name <- "danielle"
```




???

it doesnt have to be anything elaborate, it can be a simple string of text, you can create an object out of anything, and u can name them anything u want to

so here ive created an obejct called my_name and that contains this text on the other side of the operator 

the reason we create objects is mainly so that we can refer to them or use them in the future

---

# Importing data with `tidyverse`

- The **read_csv()** function from the **readr** package is one function we can use to import .csv data files

- The **read_sav()** function from the **haven** package is one function we can use to import .sav data files

- They both have one main argument which is the path to the file: 

```{r, eval = FALSE}
object_name <- readr::read_csv("./directions/to/the/data/file/go/here.csv")
```

```{r, eval = F}
object_name <- haven::read_sav("./directions/to/the/data/file/go/here.sav")
```

### Task

1. Create a new code chunk (**Ctrl + Alt + I** or **Cmd + Alt + I**), open the datafile at [this link](https://raw.githubusercontent.com/de84sussex/sussex_fundrmentals/master/docs/empathy_data.csv), copy the web address into the **readr::read_csv()** function, name the object **emp_data** & run it


???

one example of something we would want to keep in an object, is a dataset, we'll want to refer to that data several times, if we're cleaning our data, or fitting any models, we'll want to be able to refer to it, and to use it

so when we import data, we can create an object at the same time, that contains that dataset

for most of you, you'll probably work with csv files or spss files, and we have two functions from two packages that we can use to read in those data, they are both part of tidyverse, which is like a package of packages

we have reaD_csv from readr

and we have read_sav from haven 

they both have 1 main argument which is the path to the data file

which looks like this, so here, i'm creating an object by using our little arrow, ive called it object_name, but we would want to call it something that actually describes whats in it, then we have our package name, double colon, then our function name, then within the brackets, we have the filepath to some data up data, and its the same striuctyure if u were using sav or csv files

so lets give this a go now

in your rmarkdown document, create a new code chunk, open the datafile at this link, and then copy the web address into the function, so between the speech marks,

these functions take URLS or normal file paths, for those of you that downloaded the data last week to your data folder, you can write the file path out to that location instead if you want to try that, you should name it something helpful, ive suggested emp_data because its a dataset about empathy, and then run it! 


**DEMO LOADING DATA & THE MSG**

---

# Inspecting data

- Below are some useful functions to explore your data, you should run these only in the console or make sure to delete them out of your RMarkdown file after you've seen the output
- All you need to do is put the name of your **object** into the brackets of the function

.pull-left[ 

To see your raw data:

.tiny[

```{r, eval = F}
object_name
```

```{r, eval = F}
print(object_name)
```

```{r, eval = F}
View(object_name)
```

```{r, eval = F}
head(object_name)
```

```{r, eval = F}
tail(object_name)
```

]

]

.pull-right[

To see characteristics of your data:

.tiny[

```{r, eval = F}
str(object_name)
```

```{r, eval = F}
summary(object_name)
```

```{r, eval = F}
names(object_name)
```

```{r, eval = F}
ncol(object_name)
```

```{r, eval = F}
nrow(object_name)
```

]

]


**Task**: try out these functions on our **emp_data**

???

now we've loaded in our data, we want to explore it a little bit, and theres lots of functions we can use to view the raw data, and the characteristics of our data, these are all part of base R so we dont need to specify the package, and we dont need to install anything to access them

to use these, you need to switch out where object_name is written, and instead write the name of our data object, so emp_data

by running the object name or by using the print function, it will show you the raw data

the View function will open up the data in a viewer window, like spss, it is a capital V

head and tail show the first and last 6 rows, which is useful if you have a large dataset but just want to glance over a couple rows


to see the characteristics of your data, we have the structure function this str function and that tells us about the variables we have, what type of data they are, and it will list some of the values

we have summary which gives a quick summary of your data, this is a very useful function

names will print out the variable names

ncol and nrow will tell us the number of columns and the number of rows in our dataset, nrow is what we use for sample size

so try these out on our dataset, typically these functions are not ones we want to keep in our rmarkdown doc, we would want to use them to have a quick check, and so we would usually run them in the console, 

**demo them & assignment of nrow**

---

# Sub$etting

- Sometimes, we'll want to access a single column in our dataset, we can do this by subsetting with the $, like this:

```{r, eval = F}
object_name$column_name
```

- By subsetting, we can apply functions to a single column

- Two useful functions for inspecting columns are table() & class()

```{r, eval = F}
table(object_name$column_name)
```

```{r, eval = F}
class(object_name$column_name)
```

**Task**: try out these functions on the **Harm** variable of our **emp_data**

???

sometimes we'll only be interested in one variable in our dataset, and the way that we can access that is to subset our data, and we do this by using the dollar sign like this

so we have the name of our object, and then the dollar sign and then the name of our variable, so this is just a way of selecting a single column

and this means that we can apply any functions on that single column

particularly there are two functions to inspect our data that are useful to use on single columns

the first is table() and this will give us the frequiences in different groups

and we have class, which will tell us the type of variable we have, this is very useful to use if ur manipulating some variables and you want to check that its worked

these are both part of Base R so we dont need to install anything extra

so try these out on the Harm variable of our emp_data, remember that we can follow this syntax, but we need to substiture in our object name and our column name, and R is case sensitive

---

# Next Steps

- For next week you should complete the **Summarizing data (1)** & **Creating a summary table (2)** sections of the **discovr_02** tutorial by pasting the below code into the **Console** in RStudio, pressing **Enter** & skipping to the relevant sections

```{r, eval = F, echo = T}

learnr::run_tutorial("discovr_02", package = "discovr")

```

- I'm estimating 20 minutes for this tutorial

- Next week we'll cover the pipe **%>%**, data wrangling & summarising



???

ok that is all for today, for next week, you should complete the summarising data and creating a summary table section of discovr 2, you can copy the below code into the console in rstudio, run it, and then skip to those sections, i've included some information on the webpage under week 3 about it so do read that, im estimating around 20 mins for this one, so hopefully this will be a less busy week

next week we'll go over some stuff from the tutorial that you've just done, and in this tutorial as well and i'll go over the pipe, and some data wrangling and summarising






